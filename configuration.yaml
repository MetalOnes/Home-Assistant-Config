homeassistant:
  name: Home
  latitude: !secret lat
  longitude: !secret long
  elevation: !secret elevation
  unit_system: imperial
  time_zone: America/New_York
  customize: !include_dir_merge_named customize
  internal_url: !secret internal_url
  external_url: !secret external_url

frontend:
  themes: !include_dir_merge_named themes/

lovelace:
  mode: yaml
  resources:
    - url: /hacsfiles/button-card/button-card.js
      type: module
    - url: /hacsfiles/mini-media-player/mini-media-player.js
      type: module
    - url: /hacsfiles/lovelace-toggle-lock-entity-row/toggle-lock-entity-row.js
      type: module
    - url:  /hacsfiles/simple-thermostat/simple-thermostat.js
      type: module
    - url: https://unpkg.com/moment@2.23.0/moment.js
      type: js
    - url: /hacsfiles/calendar-card/calendar-card.js
      type: module
    - url: /hacsfiles/mini-graph-card/mini-graph-card-bundle.js
      type: module
    - url: /hacsfiles/vertical-style-card/vertical-style-card.js
      type: js
    - url: /hacsfiles/banner-card/banner-card.js
      type: module
    - url: /hacsfiles/untappd-card/untappd-card.js
      type: module
    - url: /hacsfiles/custom-header/custom-header.js
      type: module
    - url: /hacsfiles/bar-card/bar-card.js
      type: module
    - url: /hacsfiles/lovelace-auto-entities/auto-entities.js
      type: module
    - url: /hacsfiles/lovelace-card-tools/card-tools.js
      type: js
    - url: /hacsfiles/light-entity-card/light-entity-card.js
      type: js
  #  - url: /hacsfiles/upcoming-media-card/upcoming-media-card.js
  #    type: js
    - url: /hacsfiles/weather-card/weather-card.js
      type: module
    - url: /hacsfiles/text-divider-row/text-divider-row.js
      type: module
    - url: /hacsfiles/list-card/list-card.js
      type: js
    - url: /hacsfiles/lovelace-card-mod/card-mod.js
      type: module
    - url: /hacsfiles/lovelace-slider-entity-row/slider-entity-row.js
      type: module
    - url: /hacsfiles/lovelace-fold-entity-row/fold-entity-row.js
      type: module
    - url: /hacsfiles/sun-card/sun-card.js
      type: module
    - url: /hacsfiles/rgb-light-card/card.js
      type: module
    - url: /hacsfiles/roku-card/roku-card.js
      type: module
    - url: /hacsfiles/lovelace-paper-buttons-row/paper-buttons-row.js
      type: module
    - url: /hacsfiles/stack-in-card/stack-in-card.js
      type: module
    - url: https://fonts.googleapis.com/css?family=Comfortaa&display=swap
      type: css
    - url: /hacsfiles/garbage-collection-card/garbage-collection-card.js
      type: js

  dashboards:
    ui-system:
      mode: yaml
      title: System
      icon: mdi:home-assistant
      filename: ui-system.yaml
      require_admin: true
      show_in_sidebar: true
    ui-cameras:
      mode: yaml
      title: Cameras
      icon: mdi:cctv
      show_in_sidebar: true
      filename: ui-cameras.yaml
    ui-leds:
      mode: yaml
      title: LED Control
      icon: mdi:led-strip
      show_in_sidebar: true
      filename: ui-leds.yaml
    ui-floorplan:
      mode: yaml
      title: Floorplan
      icon: mdi:floor-plan
      show_in_sidebar: true
      filename: ui-floorplan.yaml

panel_iframe:
  ledfx:
    title: 'LEDfx'
    url: 'http://192.168.1.10:8888'
    icon: mdi:led-strip-variant

config:

mobile_app:

logger:
  default: error
  logs:
    DenonAVR: fatal
    #homeassistant.components.vera: debug
    pychromecast.socket_client: fatal
#    homeassistant.components.device_tracker: debug

system_health:

http:
  server_port: 8254
  ip_ban_enabled: true
  login_attempts_threshold: 5
  use_x_forwarded_for: true
  trusted_proxies: 127.0.0.1



# Updater Stuff
updater:

# HACS
hacs:
  token: !secret hacs_token

#discovery:

# Allows you to issue voice commands from the frontend in enabled browsers
#conversation:

recorder:
  db_url: !secret mysql_url
  purge_keep_days: 10
  exclude:
    domains:
      - camera
      - updater
      - zone
      - weather
      - time
      - calendar
      - sun

    entities:
      - sensor.sunrise_time
      - sensor.sunrise
      - sensor.sunset_time
      - sensor.sunset
      - sensor.solar_noon
      #- sensor.solar_angle
      - sensor.daylight
      - sensor.moon
      - sensor.myip
      - sensor.max_elevation
      - sensor.dark_sky_apparent_temperature
      - sensor.dark_sky_cloud_coverage
      - sensor.dark_sky_humidity
      - sensor.dark_sky_icon
      - sensor.dark_sky_precip_intensity
      - sensor.dark_sky_precip_probability
      - sensor.dark_sky_pressure
      - sensor.dark_sky_temperature
      - sensor.dark_sky_wind_bearing
      - sensor.dark_sky_wind_speed
      - sensor.date
      - sensor.simple_date
      - sensor.simple_time
      - sensor.time
      - sensor.time_date
      - sensor.time_utc
      - sensor.ssl_certificate_expiry
      - sensor.flyers
      - sensor.hacs
      - sensor.home_team
      - sensor.away_team
      - sensor.wral
      - sensor.current_version
      - sensor.untappd_badge
      - sensor.untappd_beer
      - sensor.untappd_followings
      - sensor.untappd_last_badge_robotsfearme
      - sensor.untappd_last_check_in_robotsfearme
      - sensor.untappd_wishlist_robotsfearme
      - sensor.wupws_dewpt
      - sensor.wupws_heatindex
      - sensor.wupws_humidity
      - sensor.wupws_precip_1d
      - sensor.wupws_precip_2d
      - sensor.wupws_precip_3d
      - sensor.wupws_precip_4d
      - sensor.wupws_precip_chance_1d
      - sensor.wupws_precip_chance_2d
      - sensor.wupws_precip_chance_3d
      - sensor.wupws_precip_chance_4d
      - sensor.wupws_preciprate
      - sensor.wupws_preciptotal
      - sensor.wupws_pressure
      - sensor.wupws_temp
      - sensor.wupws_temp_high_1d
      - sensor.wupws_temp_high_2d
      - sensor.wupws_temp_high_3d
      - sensor.wupws_temp_high_4d
      - sensor.wupws_temp_low_1d
      - sensor.wupws_temp_low_2d
      - sensor.wupws_temp_low_3d
      - sensor.wupws_temp_low_4d
      - sensor.wupws_weather_1d
      - sensor.wupws_weather_1n
      - sensor.wupws_weather_2d
      - sensor.wupws_weather_2n
      - sensor.wupws_weather_3d
      - sensor.wupws_weather_3n
      - sensor.wupws_weather_4d
      - sensor.wupws_weather_4n
      - sensor.wupws_wind_1d
      - sensor.wupws_wind_2d
      - sensor.wupws_wind_3d
      - sensor.wupws_wind_4d
      - sensor.wupws_windchill
      - sensor.wupws_winddir
      - sensor.wupws_windgust
      - sensor.wupws_windspeed
      - sensor.uptime
      - sensor.wifi_connection
      - sensor.wifi_connection_2
      - sensor.nanomote_1_199
      - sensor.nanomote_quad_202
      - sensor.hass_avail_version
      - sensor.hacs
      - sensor.bssid
      - sensor.galaxys7_battery_state
      - sensor.erics_ipad_battery_level
      - sensor.erics_ipad_battery_state
      - sensor.sm_j700p_battery_state
      - sensor.battery_level
      - sensor.battery_level_2
      - sensor.battery_level_3
      - sensor.battery_state
      - device_tracker.eric_s_ipad_2
      - device_tracker.lite
      - device_tracker.living_room_roku
      - device_tracker.pro
      - device_tracker.unifi_a4_da_22_2a_d1_df_default
      - device_tracker.unifi_c8_02_8f_0f_1d_32_default
      - device_tracker.val_acer
      - device_tracker.xboxone
      - sensor.moon


history:
  exclude:
    domains:
      - camera
      - updater
      - zone
      - weather
      - time
      - calendar
      - sun
      - automation
      - script
    entities:
      - sensor.sunrise_time
      - sensor.sunrise
      - sensor.sunset_time
      - sensor.sunset
      - sensor.solar_noon
      #- sensor.solar_angle
      - sensor.daylight
      - sensor.myip
      - sensor.max_elevation
      - sensor.dark_sky_apparent_temperature
      - sensor.dark_sky_cloud_coverage
      - sensor.dark_sky_humidity
      - sensor.dark_sky_icon
      - sensor.dark_sky_precip_intensity
      - sensor.dark_sky_precip_probability
      - sensor.dark_sky_pressure
      - sensor.dark_sky_temperature
      - sensor.dark_sky_wind_bearing
      - sensor.dark_sky_wind_speed
      - sensor.date
      - sensor.simple_date
      - sensor.simple_time
      - sensor.time
      - sensor.time_date
      - sensor.time_utc
      - sensor.ssl_certificate_expiry
      - sensor.flyers
      - sensor.hacs
      - sensor.home_team
      - sensor.away_team
      - sensor.wral
      - sensor.current_version
      - sensor.untappd_badge
      - sensor.untappd_beer
      - sensor.untappd_followings
      - sensor.untappd_last_badge_robotsfearme
      - sensor.untappd_last_check_in_robotsfearme
      - sensor.untappd_wishlist_robotsfearme
      - sensor.wupws_dewpt
      - sensor.wupws_heatindex
      - sensor.wupws_humidity
      - sensor.wupws_precip_1d
      - sensor.wupws_precip_2d
      - sensor.wupws_precip_3d
      - sensor.wupws_precip_4d
      - sensor.wupws_precip_chance_1d
      - sensor.wupws_precip_chance_2d
      - sensor.wupws_precip_chance_3d
      - sensor.wupws_precip_chance_4d
      - sensor.wupws_preciprate
      - sensor.wupws_preciptotal
      - sensor.wupws_pressure
      - sensor.wupws_temp
      - sensor.wupws_temp_high_1d
      - sensor.wupws_temp_high_2d
      - sensor.wupws_temp_high_3d
      - sensor.wupws_temp_high_4d
      - sensor.wupws_temp_low_1d
      - sensor.wupws_temp_low_2d
      - sensor.wupws_temp_low_3d
      - sensor.wupws_temp_low_4d
      - sensor.wupws_weather_1d
      - sensor.wupws_weather_1n
      - sensor.wupws_weather_2d
      - sensor.wupws_weather_2n
      - sensor.wupws_weather_3d
      - sensor.wupws_weather_3n
      - sensor.wupws_weather_4d
      - sensor.wupws_weather_4n
      - sensor.wupws_wind_1d
      - sensor.wupws_wind_2d
      - sensor.wupws_wind_3d
      - sensor.wupws_wind_4d
      - sensor.wupws_windchill
      - sensor.wupws_winddir
      - sensor.wupws_windgust
      - sensor.wupws_windspeed
      - sensor.uptime
      - sensor.wifi_connection
      - sensor.wifi_connection_2
      - sensor.nanomote_1_199
      - sensor.nanomote_quad_202
      - sensor.hass_avail_version
      - sensor.hacs
      - sensor.bssid
      - sensor.galaxys7_battery_state
      - sensor.erics_ipad_battery_level
      - sensor.erics_ipad_battery_state
      - sensor.sm_j700p_battery_state
      - sensor.battery_level
      - sensor.battery_level_2
      - sensor.battery_level_3
      - sensor.battery_state
      - device_tracker.eric_s_ipad_2
      - device_tracker.lite
      - device_tracker.living_room_roku
      - device_tracker.pro
      - device_tracker.unifi_a4_da_22_2a_d1_df_default
      - device_tracker.unifi_c8_02_8f_0f_1d_32_default
      - device_tracker.val_acer
      - device_tracker.xboxone

logbook:
  exclude:
    domains:
      - zone
      - updater
      - weather
    entities:
      - sensor.sunrise_time
      - sensor.sunset_time
      - sensor.myipopendnscom
      - sensor.dark_sky_apparent_temperature
      - sensor.dark_sky_cloud_coverage
      - sensor.dark_sky_humidity
      - sensor.dark_sky_icon
      - sensor.dark_sky_precip_intensity
      - sensor.dark_sky_precip_probability
      - sensor.dark_sky_pressure
      - sensor.dark_sky_temperature
      - sensor.dark_sky_wind_bearing
      - sensor.dark_sky_wind_speed
      - sensor.date
      - sensor.simple_date
      - sensor.simple_time
      #- sensor.solar_angle
      - sensor.ssl_certificate_expiry
      - sensor.flyers
      - sensor.hacs
      - sensor.home_team
      - sensor.away_team
      - sensor.wral
      - sensor.current_version
      - sensor.untappd_badge
      - sensor.untappd_beer
      - sensor.untappd_followings
      - sensor.untappd_last_badge_robotsfearme
      - sensor.untappd_last_check_in_robotsfearme
      - sensor.untappd_wishlist_robotsfearme

sun:

# Enable MQTT - not needed right now
#mqtt:
#  broker: !secret mqtt_ip
#  port: 8883
#  username: !secret mqtt_user
#  password: !secret mqtt_password
#  certificate: /etc/mosquitto/certs/ca.crt
#  certificate: /etc/ssl/certs/ca-certificates.crt
#  tls_insecure: true
#  protocol: 3.1

##########################################
# Device Tracker & Presence
##########################################

person:
  - name: Eric
    id: eric
    user_id: !secret e_uid
    device_trackers:
      - device_tracker.galaxy_s7
      - device_tracker.sm_g930v
  - name: Val
    id: val
    user_id: !secret v_uid
    device_trackers:
      - device_tracker.galaxy_j7
      - device_tracker.sm_j700p

##########################################
# Lights
##########################################

# LED Wifi Controllers
light:
  - platform: flux_led
    devices:
      192.168.1.122:
        name: mancave_desk
        mode: rgb
      192.168.1.149:
        name: pin_board
        mode: rgbw
      192.168.1.169:
        name: tv
        mode: rgbw
        custom_effect:
          speed_pct: 7
          transition: gradual
          colors:
            - [178,34,34]
            - [255,0,0]
            - [255,69,0]
            - [255,165,0]
            - [255,255,0]
            - [54,205,50]
            - [07,142,35]
            - [0,128,0]
            - [0,255,0]
            - [0,250,154]
            - [0,128,128]
            - [0,255,255]
            - [0,0,255]
            - [138,43,226]
            - [139,0,139]
            - [255,0,255]
      192.168.1.176:
        name: Cabinets
        mode: rgbw

  - platform: limitlessled
    bridges:
      - host: 192.168.1.148
        groups:
        - number: 1
          name: Fireplace
          type: rgbww
        - number: 1
          name: Wifi Box
          type: bridge-led

##########################################
# Vera
##########################################

vera:
  vera_controller_url: !secret vera_ip
  exclude: [ 166, 152, 144, 206]
#  lights: [ 118, 123, 115, 135, 133, 103, 104, 170, 160, 107, 120]

##########################################
# Thermostat
##########################################
climate:
  - platform: honeywell
    region: us
    username: !secret tcc_un
    password: !secret tcc_pw

##########################################
# Media Players
##########################################

media_player:

# Living Room Kodi
  - platform: kodi
    host: !secret kodi1_ip
    port: 8080
    name: Living Room Kodi
    username: !secret kodi1_user
    password: !secret kodi1_pass

# Bedroom Kodi
  - platform: kodi
    host: !secret kodi2_ip
    port: 8080
    name: Bedroom Kodi

# Denon Receiver
  - platform: denonavr
    host: !secret denonavr_ip

# Roku TV
roku:
  - host: 192.168.1.179

emulated_roku:
  servers:
    - name: Home Assistant
      listen_port: 8060

##########################################
# Cams
##########################################
stream:

camera:

# Back Door Cam
  - platform: mjpeg
    mjpeg_url: !secret bdcam_url
    name: Back Door
    username: !secret bdcam_user
    password: !secret bdcam_pass

# Front Door Cam
  - platform: mjpeg
    mjpeg_url: !secret fdcam_url
    name: Front Door
    username: !secret fdcam_user
    password: !secret fdcam_pass

# Man Cave Cam
  - platform: mjpeg
    mjpeg_url: !secret mccam_url
    name: Man Cave Camera
    username: !secret mccam_user
    password: !secret mccam_pass

# Deck Cam
  - platform: ffmpeg
    input: !secret deckcam_url
    name: Deck Cam

  - platform: ffmpeg
    input: !secret drivewaycam_url
    name: Driveway Cam

  - platform: ffmpeg
    input: !secret cornercam_url
    name: Corner Cam


#### Not actual cams, but images to use in HA

# Solar alerts

  - platform: generic
    still_image_url: http://www.n3kl.org/sun/images/status.gif
    name: Solar X-Rays

  - platform: generic
    still_image_url: http://www.n3kl.org/sun/images/kpstatus.gif
    name: Geomagnetic Field

##########################################
# Sensors
##########################################

sensor:

# Living Room Temp
  - platform: template
    sensors:
      current_temperature:
        friendly_name: Living Room Temp
        value_template: "{{ state_attr('climate.thermostat_147', 'current_temperature') }}"
        unit_of_measurement: '°F'
      masterbath_temperature:
        friendly_name: Master Bath Temp
        value_template: "{{ states('sensor.temperature_sensor_207')|int }}"
        unit_of_measurement: '°F'

# Newest Version of HASS Available
  - platform: template
    sensors:
      hass_avail_version:
        friendly_name: HASS Version Available
        value_template: "{{ state_attr('binary_sensor.updater', 'newest_version') }}"

# Weather Underground
  - platform: wundergroundpws
    api_key: !secret wu_api
    pws_id: KNCFUQUA65
    monitored_conditions:
      - weather_1d
      - weather_1n
      - precip_chance_1d
      - precip_1d
      - wind_1d
      - temp_high_1d
      - temp_low_1d

      - weather_2d
      - weather_2n
      - precip_chance_2d
      - precip_2d
      - wind_2d
      - temp_high_2d
      - temp_low_2d

      - weather_3d
      - weather_3n
      - precip_chance_3d
      - precip_3d
      - wind_3d
      - temp_high_3d
      - temp_low_3d

      - weather_4d
      - weather_4n
      - precip_chance_4d
      - precip_4d
      - wind_4d
      - temp_high_4d
      - temp_low_4d

      - temp
      - precipTotal
      - precipRate
      - pressure
      - humidity
      - windSpeed
      - windGust
      - winddir
      - dewpt
      - heatIndex
      - windChill

# Moon phases and stuff

  - platform: moon

# Enhanced sun conditions

  - platform: sun2
    monitored_conditions:
      - sunrise
      - sunset
      - solar_noon
      - max_elevation
      - daylight

# Next Sunrise/Sunset Times
  - platform: template
    sensors:
      sunset_time:
        value_template: '{% set timestamp = as_timestamp(states.sun.sun.attributes.next_setting) | timestamp_custom("%I:%M %p") %} {{ timestamp.lstrip("0") }}'
        friendly_name: "Sunset"

  - platform: template
    sensors:
      sunrise_time:
        value_template: '{% set timestamp = as_timestamp(states.sun.sun.attributes.next_rising) | timestamp_custom("%I:%M %p") %} {{ timestamp.lstrip("0") }}'
        friendly_name: "Sunrise"

  - platform: template
    sensors:
      solar_angle:
        friendly_name: "Sun angle"
        unit_of_measurement: 'degrees'
        value_template: "{{ states.sun.sun.attributes.elevation }}"

# Pi-Hole
#  - platform: pi_hole
#    host: !secret pi_hole_ip
#    monitored_conditions:
#      - dns_queries_today
#      - ads_blocked_today
#      - ads_percentage_today

# NHL
#  - platform: nhl_api
#    team_id: 4
#    name: Flyers
#    scan_interval: 60

#  - platform: template
#    sensors:
#      away_team:
#        friendly_name_template: '{{ states.sensor.flyers.attributes.away_name }}'
#        value_template: '{{ states.sensor.flyers.attributes.away_score }}'
#        entity_picture_template: '{{ states.sensor.flyers.attributes.away_logo }}'
#      home_team:
#        friendly_name_template: '{{ states.sensor.flyers.attributes.home_name }}'
#        value_template: '{{ states.sensor.flyers.attributes.home_score }}'
#        entity_picture_template: '{{ states.sensor.flyers.attributes.home_logo }}'

# Gets public IP
  - platform: dnsip
    scan_interval: 1800

  - platform: cert_expiry
    host: evilrobot.space


# Harmony Status
  - platform: template
    sensors:
      harmony_living_room:
        value_template: '{{states.remote.living_room.attributes.current_activity }}'
        friendly_name: 'Living Room'

#  - platform: template
#    sensors:
#      lr_avr_vol:
#        value_template: "{{ states.media_player.denon_avr_s720w.attributes.volume_level | float * 100 }}"

# Sonarr Upcoming Media
#  - platform: sonarr_upcoming_media
#    urlbase: sonarr
#    api_key: !secret sonarr_api

# SABnzbd
#  - platform: sabnzbd
#    host: !secret sabnzbd_ip
#    port: !secret sabnzbd_port
#    api_key: !secret sabnzbd_api
#    monitored_variables:
#      - 'current_status'
#      - 'speed'
#      - 'queue_size'
#      - 'queue_remaining'
#      - 'disk_size'
#      - 'disk_free'

# Vera Home mode
  - platform: rest
    name: "House Mode"
    resource: !secret hmode_url

  - platform: template
    sensors:
      homemode:
        friendly_name: 'House Mode'
        value_template:  >-
            {%- if is_state("sensor.house_mode", "1") %}
              Home
            {% elif is_state("sensor.house_mode", "2") %}
              Away
            {% elif is_state("sensor.house_mode", "3") %}
              Night
            {% elif is_state("sensor.house_mode", "4") %}
              Vacation
            {%- endif %}

# Versions sensor
  - platform: version

#Display current HA uptime
  - platform: uptime
    name: Uptime
    unit_of_measurement: days
#Display various system information
  - platform: systemmonitor
    resources:
      - type: memory_use_percent
      - type: processor_use
      - type: last_boot


# Date and Time
  - platform: time_date
    display_options:
      - 'time'
      - 'date'
      - 'time_date'
      - 'time_utc'
  - platform: template
    sensors:
      simple_time:
        entity_id: sensor.time
        friendly_name: "Time"
        value_template: "{{ now().strftime('%I:%M %P') }}"
  - platform: template
    sensors:
      simple_date:
        entity_id: sensor.time
        friendly_name: "Date"
        value_template: "{{ now().strftime('%A %b %d, %Y') }}"

# Untappd sensor and templating
  - platform: untappd
    username: !secret untappd_user
    id: !secret untappd_id
    secret: !secret untappd_secret

  - platform: template
    sensors:
      untappd_badge:
#        value_template: "Last Badge: {{ states.sensor.untappd_last_badge_robotsfearme.attributes.badge }} (Level {{ states.sensor.untappd_last_badge_robotsfearme.attributes.level }})"
        value_template: "Last Badge: {{ states.sensor.untappd_last_badge_robotsfearme.attributes.badge }}"
  - platform: template
    sensors:
      untappd_beer:
        value_template: "Last Beer: {{ states.sensor.untappd_last_check_in_robotsfearme.attributes.beer }} ({{ states.sensor.untappd_last_check_in_robotsfearme.attributes.abv }})"

  - platform: template
    sensors:
      untappd_followings:
#        unit_of_measurement: followers
        value_template: "{{ states.sensor.untappd_last_check_in_robotsfearme.attributes.followings }}"

  - platform: template
    sensors:
      untappd_checked:
#        unit_of_measurement: checkins
        value_template: "{{ states.sensor.untappd_last_check_in_robotsfearme.attributes.checkins }}"

  - platform: template
    sensors:
      untappd_total_beers:
#        unit_of_measurement: beers
        value_template: "{{ states.sensor.untappd_last_check_in_robotsfearme.attributes.total_beers }}"

  - platform: template
    sensors:
      untappd_total_badges:
#        unit_of_measurement: badges
        value_template: "{{ states.sensor.untappd_last_check_in_robotsfearme.attributes.total_badges }}"

#
# LEDfx/WLED Things
#
  - platform: rest
    name: LEDfx Devices
    resource: http://192.168.1.10:8888/api/devices
    value_template: '{{ value_json.ledfx_device }}'
    json_attributes:
      - devices

  - platform: rest
    name: LEDfx Effect
    resource: http://192.168.1.10:8888/api/effects
    value_template: '{{ value_json[0].name }}'

  - platform: template
    sensors:
      wled1_effect:
        value_template: "{{ states.light.wled1.attributes.effect }}"
      ledfx_wled1_e:
        value_template: '{{ states.sensor.ledfx_devices.attributes["devices"]["wled1"]["effect"]["name"] }}'
        friendly_name: "Device 1 Current Effect"
      ledfx_wled1_name:
        value_template: '{{ states.sensor.ledfx_devices.attributes["devices"]["wled1"]["config"]["name"] }}'
      ledfx_wled1_ip:
        value_template: '{{ states.sensor.ledfx_devices.attributes["devices"]["wled1"]["config"]["ip_address"] }}'
        friendly_name: "Device 1 IP"


      #ledfx_effect_t:
      #  value_template: '{{ states.sensor.ledfx_effect.attributes.["0"] }}'

# See Rest_command around 1100



binary_sensor:
  - platform: generic_hygrostat
    name: Bathroom Hygrostat
    sensor: sensor.humidity_sensor_209 # Source humidity sensor
    delta_trigger: 3 # Optional humidity swing to detect
    target_offset: 3 # Optional dehumidification target offset
    max_on_time: 3600 # Optional # Optional safety max on time
##########################################
# Weather (New method)
##########################################
weather:
  - platform: darksky
    api_key: !secret darksky_api_key
    mode: daily
    name: Weather
##########################################
# Remote
##########################################

remote:
# Harmony Remote
  - platform: harmony
    name: Living Room
    host: !secret livingroom_harmony_ip

##########################################
# Telegram Bot
##########################################

telegram_bot:
  platform: polling
  api_key:  !secret telegram_bot_api_key
  allowed_chat_ids:
    - !secret e_chat_id
    - !secret v_chat_id

#########################################
# Notifications
#########################################

notify:
  - name: telegram_e
    platform: telegram
    chat_id: !secret e_chat_id
  - name: telegram_v
    platform: telegram
    chat_id: !secret v_chat_id
  - name: all_devices
    platform: group
    services:
      - service: mobile_app_galaxys7
      - service: mobile_app_sm_j700p
      - service: telegram_e

#########################################
# Emulated Hue Bridge
#########################################

emulated_hue:
  #type: alexa
  expose_by_default: false

#########################################
# Google calendar
#########################################
google:
  client_id: !secret gcal_client
  client_secret: !secret gcal_secret

#########################################
# Harmony Switches
#########################################
switch:
  - platform: template
    switches:
      lr_tv:
        friendly_name: TV
        value_template: "{{ is_state_attr('remote.living_room', 'current_activity', 'Watch TV') }}"
        turn_on:
          service: remote.turn_on
          data:
            entity_id: remote.living_room
            activity: 'Watch TV'
        turn_off:
          service: remote.turn_on
          data:
            entity_id: remote.living_room
            activity: 'PowerOff'
      lr_kodi:
        friendly_name: Kodi
        value_template: "{{ is_state_attr('remote.living_room', 'current_activity', 'Watch Kodi') }}"
        turn_on:
          service: remote.turn_on
          data:
            entity_id: remote.living_room
            activity: 'Watch Kodi'
        turn_off:
          service: remote.turn_on
          data:
            entity_id: remote.living_room
            activity: 'PowerOff'
      lr_xbox:
        friendly_name: Xbox
        value_template: "{{ is_state_attr('remote.living_room', 'current_activity', 'Xbox' ) }}"
        turn_on:
          service: remote.turn_on
          data:
            entity_id: remote.living_room
            activity: 'Xbox'
        turn_off:
          service: remote.turn_on
          data:
            entity_id: remote.living_room
            activity: 'PowerOff'
      lr_wiiu:
        friendly_name: Switch
        value_template: "{{ is_state_attr('remote.living_room', 'current_activity', 'WiiU' ) }}"
        turn_on:
          service: remote.turn_on
          data:
            entity_id: remote.living_room
            activity: 'WiiU'
        turn_off:
          service: remote.turn_on
          data:
            entity_id: remote.living_room
            activity: 'PowerOff'
      lr_music:
        friendly_name: Music
        value_template: "{{ is_state_attr('remote.living_room', 'current_activity', 'Listen to Music' ) }}"
        turn_on:
          service: remote.turn_on
          data:
            entity_id: remote.living_room
            activity: 'Listen to Music'
        turn_off:
          service: remote.turn_on
          data:
            entity_id: remote.living_room
            activity: 'PowerOff'
      lr_chromecast:
        friendly_name: Chromecast
        value_template: "{{ is_state_attr('remote.living_room', 'current_activity', 'Chromecast' ) }}"
        turn_on:
          service: remote.turn_on
          data:
            entity_id: remote.living_room
            activity: 'Chromecast'
        turn_off:
          service: remote.turn_on
          data:
            entity_id: remote.living_room
            activity: 'PowerOff'
      lr_steam:
        friendly_name: Steam
        value_template: "{{ is_state_attr('remote.living_room', 'current_activity', 'Play Steam' ) }}"
        turn_on:
          service: remote.turn_on
          data:
            entity_id: remote.living_room
            activity: 'Play Steam'
        turn_off:
          service: remote.turn_on
          data:
            entity_id: remote.living_room
            activity: 'PowerOff'

# Camera Privacy Toggle
  - platform: command_line
    switches:
      camera_position:
        command_on: !secret bdcam_priv
        command_off: !secret bdcam_def
rest_command:
  simpsons:
    url: 'http://192.168.1.210:8080/jsonrpc?request={"jsonrpc":"2.0","id":"1","method":"Player.Open","params":{"item":{"file":"special://profile/playlists/video/Simpsons.xsp"}}}'
    method: POST
    content_type: 'application/json'
    headers:
      authorization: 'Basic a29kaTprb2Rp'
  ledfx_wled1_wave:
    url: "http://192.168.1.10:8888/api/presets"
    method: put
    headers:
      accept: 'application/json'
    payload: '{"id":"wled1-wavelength","action":"activate"}'
    content_type: 'application/json'
  ledfx_wled1_off:
    url: "http://192.168.1.10:8888/api/presets"
    method: put
    headers:
      accept: 'application/json'
    payload: '{"id":"wled1-off","action":"activate"}'
    content_type: 'application/json'

#########################################
# Shell Commands
#########################################
shell_command:
  yoga_stretch: "curl -X POST http://192.168.1.179:8060/launch/837?contentId=GGJzZx4H2K4&mediaType=live"
  yoga_beg: "curl -X POST http://192.168.1.179:8060/launch/837?contentId=_2PB4J5h7bI&mediaType=live"
  vic_workout: "curl -X POST http://192.168.1.179:8060/launch/837?contentId=PWEdJRRndkQ&mediaType=live"
  15m_workout: "curl -X POST http://192.168.1.179:8060/launch/837?contentId=GS_z6FG_jqE&mediaType=live"
  tv_wral: "curl -d '' 'http://192.168.1.179:8060/launch/tvinput.dtv?ch=5.1'"
  tv_abc: "curl -d '' 'http://192.168.1.179:8060/launch/tvinput.dtv?ch=11.1'"
  tv_cbs: "curl -d '' 'http://192.168.1.179:8060/launch/tvinput.dtv?ch=17.1'"
  tv_fox: "curl -d '' 'http://192.168.1.179:8060/launch/tvinput.dtv?ch=50.1'"
  tv_pbs: "curl -d '' 'http://192.168.1.179:8060/launch/tvinput.dtv?ch=4.1'"
  wled1_startup: "curl -d '' 'http://192.168.1.11/win&FP=50&FX=93&T=1&SX=55&IX=5&A=100&CL=000000&C2=000000'"
  wled1_shutdown: "curl -d '' 'http://192.168.1.11/win&FP=49&FX=93&T=1&SX=55&IX=5&A=100&CL=000000&C2=000000'"
  wled1_cyanegrad: "curl -d '' 'http://192.168.1.11/win&FP=37&FX=46&T=1&A=100&CL=000000&C2=000000'"
  wled1_orangegrad: "curl -d '' 'http://192.168.1.11/win&FP=47&FX=46&T=1&A=100&CL=000000&C2=000000'"


#########################################
# Includes
#########################################
group: !include groups.yaml
automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml
