custom_header:
  compact_mode: true
  background: var(--app-header-background-color)
title: System
views:
  - title: System
    icon: mdi:home-assistant
    cards:
  # Network Info
      - type: custom:stack-in-card
        keep:
          background: true
        cards:
          - type: custom:button-card
            name: Network
            template: general_label
          - type: custom:stack-in-card
            mode: horizontal
            keep:
              margin: true
              border_radius: true
              background: true
            cards:
              - type: custom:button-card
                name: "Public IP:"
                entity_picture: /local/network.jpg
                entity: sensor.myip
                icon: mdi:network-router
                show_state: true
                show_icon: true
                show_entity_picture: false
                show_last_changed: true
                size: 64px
                layout: icon_name_state2nd
              - type: custom:button-card
                name: "SSL Cert Expiry:"
                entity: sensor.ssl_certificate_expiry
                show_state: true
                show_icon: true
                size: 64px
                layout: icon_name_state2nd
                tap_action:
                  action: url
                  url_path: https://evilrobot.space
                styles:
                  icon:
                    - color: >
                        [[[
                          if (entity.state > 60) return 'lime';
                          if (entity.state <= 60 && entity.state >= 30) return 'orange';
                          else return 'darkred';
                        ]]]
  # System info and commands
      - type: custom:stack-in-card
        keep:
          background: true
        cards:
          - type: custom:button-card
            name: "Hass/System"
            template: general_label
          - type: custom:stack-in-card
            mode: horizontal
            keep:
              margin: true
              border_radius: true
              background: true
            cards:
              - type: custom:button-card
                entity: sensor.current_version
                name: "Currently Running:"
                show_state: true
                show_icon: false
                tap_action:
                  action: navigate
                  navigation_path: /developer-tools/info
                styles:
                  card:
                    - font-size: 14px

              - type: custom:button-card
                entity: sensor.hass_avail_version
                name: "Available:"
                show_state: true
                show_icon: false
                tap_action:
                  action: navigate
                  navigation_path: /developer-tools/info
                styles:
                  card:
                    - font-size: 14px

              - type: custom:button-card
                entity: sensor.hacs
                name: "HACS Updates:"
                show_state: true
                show_icon: false
                tap_action:
                  action: navigate
                  navigation_path: /hacs
                styles:
                  card:
                    - font-size: 14px
          - type: custom:stack-in-card
            mode: horizontal
            keep:
              margin: true
              border_radius: true
              background: true
            cards:
              - type: custom:button-card
                entity: sensor.uptime
                name: "Uptime:"
                show_state: true
                show_icon: false
              - type: custom:button-card
                entity: sensor.last_boot
                name: "Last Boot:"
                show_state: true
                show_icon: false

          - type: custom:stack-in-card
            mode: horizontal
            keep:
              margin: true
              border_radius: true
              background: true
            cards:
              - type: "custom:mini-graph-card"
                entities:
                  - sensor.processor_use
                name: "Procesor"
                line_color: rgb(28, 132, 255)
                show:
                  labels: hover
                  points: false
                  state: false
                line_width: 3
                points_per_hour: 30
                hours_to_show: 1
              - type: "custom:mini-graph-card"
                entities:
                  - sensor.memory_use_percent
                name: "Memory"
                line_color: green
                show:
                  labels: hover
                  points: false
                  state: false
                line_width: 3
                points_per_hour: 60
                hours_to_show: 1

          - type: custom:stack-in-card
            mode: horizontal
            keep:
              margin: true
              border_radius: true
              background: true
            cards:
              - type: custom:button-card
                icon: mdi:reload
                name: Restart Vera
                entity: scene.reboot_vera
                template: system_button
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  entity: scene.reboot_vera
              - type: "custom:button-card"
                color_type: blank-card
                color_off: var(--disabled-text-color)
              - type: "custom:button-card"
                color_type: blank-card
                color_off: var(--disabled-text-color)
              - type: "custom:button-card"
                color_type: blank-card
                color_off: var(--disabled-text-color)
  # Battery Levels
      - type: custom:stack-in-card
        keep:
          background: true
        cards:
          - type: custom:button-card
            name: Batteries
            template: general_label
          - type: custom:auto-entities
            card:
              type: custom:bar-card
              attribute: battery_level
              severity:
                - from: 0
                  to: 50
                  color: 'rgba(191, 64, 64, 0.5)'
                - from: 51
                  to: 75
                  color: 'rgba(191, 149, 64, 0.5)'
                - from: 76
                  to: 100
                  color: 'rgba(64, 191, 64, 0.5)'
              columns: 2

            filter:
              include:
                - attributes:
                    battery_level: <=100
# Templates for button-card
button_card_templates:
  !include button-card-templates.yaml
